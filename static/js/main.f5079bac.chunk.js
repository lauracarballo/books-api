(this["webpackJsonpbooks-api"]=this["webpackJsonpbooks-api"]||[]).push([[0],{40:function(e,n,t){e.exports=t(51)},51:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),i=t(14),r=t.n(i),c=t(10),s=t.n(c),l=t(17),u=t(6),p=t(37),d=t(11),m=t(3),f=t(38),b=Object(a.createContext)();function g(){return Object(a.useContext)(b)}var h=t(35);function x(e){var n=e.username,t=e.setLists,a=e.handleEdit,i=e.value,r=g().logout,c=function(){var e=Object(l.a)(s.a.mark((function e(n){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.a)("https://www.googleapis.com/books/v1/volumes?q=".concat(n,"&key=").concat("AIzaSyC9XbOjIglj8HSgR3jVwvK6q49Z9RnFfrU"));case 2:return t=e.sent,e.abrupt("return",t.data.items.map((function(e){return{label:e.volumeInfo.title,value:e.id,image:e.volumeInfo.imageLinks&&e.volumeInfo.imageLinks.smallThumbnail,authors:e.volumeInfo.authors,description:e.volumeInfo.description}})));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return o.a.createElement("div",null,o.a.createElement("header",{className:"header"},o.a.createElement("h1",null,n,"'s BOOKSHELF"),o.a.createElement("div",{className:"logout-button"},o.a.createElement("button",{onClick:r},"Sign Out"))),o.a.createElement(f.a,{cacheOptions:!0,defaultOptions:!0,placeholder:"Add a book here",components:{Option:v},loadOptions:c,styles:O,onChange:function(e,n){t((function(n){return Object(d.a)(Object(d.a)({},n),{},{wishlist:[].concat(Object(p.a)(n.wishlist),[{id:e.value,title:e.label,authors:e.authors,image:e.image,description:e.description}])})}))}}),o.a.createElement("div",{className:"delete-button"},o.a.createElement("button",{onClick:a},i)))}var v=function(e){return o.a.createElement(m.z.Option,e,e.label," - ",e.data.authors)},O={container:function(e){return Object(d.a)(Object(d.a)({},e),{},{width:300})},control:function(e){return Object(d.a)(Object(d.a)({},e),{},{borderColor:"#fff"})}},_=t(19),j=t(21);function E(e){var n=e.setLists,t=e.lists,i=e.remove,r=Object(a.useState)(null),c=Object(u.a)(r,2),s=c[0],l=c[1];function p(e,a){var o=Array.from(t[e]);o.splice(a,1),n((function(n){return Object(d.a)(Object(d.a)({},n),{},Object(_.a)({},e,o))}))}function m(e){l(e)}return o.a.createElement(j.a,{onDragEnd:function(e){if(e.destination)if(e.source.droppableId===e.destination.droppableId){var a=Array.from(t[e.source.droppableId]),o=a.splice(e.source.index,1),i=Object(u.a)(o,1)[0];a.splice(e.destination.index,0,i),n((function(n){return Object(d.a)(Object(d.a)({},n),{},Object(_.a)({},e.source.droppableId,a))}))}else{var r=Array.from(t[e.source.droppableId]),c=Array.from(t[e.destination.droppableId]),s=r.splice(e.source.index,1),l=Object(u.a)(s,1)[0];c.splice(e.destination.index,0,l),n((function(n){var t;return Object(d.a)(Object(d.a)({},n),{},(t={},Object(_.a)(t,e.source.droppableId,r),Object(_.a)(t,e.destination.droppableId,c),t))}))}}},o.a.createElement(j.c,{droppableId:"books",direction:"horizontal"},(function(e){return o.a.createElement("ul",Object.assign({className:"books"},e.droppableProps,{ref:e.innerRef}),t.books.map((function(e,n){return o.a.createElement(j.b,{isDragDisabled:!i,key:e.id,draggableId:e.id.toString(),index:n},(function(t){return o.a.createElement("li",Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps,{className:"book-item"}),i?o.a.createElement("div",{className:"delete-button"},o.a.createElement("button",{onClick:function(){return p("books",n)},className:"delete-button__inner-button"},"x")):null,e.image&&o.a.createElement("img",{onClick:function(){return m(e)},className:"book__img",src:e.image,alt:""}))}))})),e.placeholder)})),o.a.createElement("div",null,s?o.a.createElement("div",{className:"book__content-background",onClick:function(){l(!1)}},o.a.createElement("div",{className:"book__content"},s.image&&o.a.createElement("img",{className:"book__content__img",src:s.image,alt:""}),o.a.createElement("div",{className:"book__content__description"},o.a.createElement("div",{className:"book__content__description-item book__content__description-item-title"},s.title),o.a.createElement("div",{className:"book__content__description-item"},s.authors.join(", ")),o.a.createElement("div",{className:"book__content__description-item"},s.description)))):null),o.a.createElement("div",null,o.a.createElement("h2",null,"To be read..."),o.a.createElement(j.c,{droppableId:"wishlist",direction:"horizontal"},(function(e){return o.a.createElement("ul",Object.assign({className:"wishlist"},e.droppableProps,{ref:e.innerRef}),t.wishlist.map((function(e,n){return console.log(e),o.a.createElement(j.b,{isDragDisabled:!i,key:e.id,draggableId:"wish"+e.id.toString(),index:n},(function(t){return o.a.createElement("li",Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps,{className:"wishlist-item"}),i?o.a.createElement("div",{className:"delete-button"},o.a.createElement("button",{onClick:function(){return p("wishlist",n)},className:"delete-button__inner-button"},"x")):null,e.image&&o.a.createElement("img",{onClick:function(){return m(e)},className:"book__img",src:e.image,alt:""}))}))})),e.placeholder)}))))}var k=t(18),w=t(5);function y(){var e=g(),n=e.isAuthenticated,t=e.signUp,i=Object(a.useState)(""),r=Object(u.a)(i,2),c=r[0],s=r[1],l=Object(a.useState)(""),p=Object(u.a)(l,2),d=p[0],m=p[1],f=Object(a.useState)(""),b=Object(u.a)(f,2),h=b[0],x=b[1],v=Object(a.useState)(""),O=Object(u.a)(v,2),_=O[0],j=O[1];return n?o.a.createElement(w.a,{to:"/"}):o.a.createElement("div",{className:"login"},o.a.createElement("div",null,o.a.createElement("h1",null,"MY PERSONAL BOOKSHELF"),o.a.createElement("div",{className:"login__form"},o.a.createElement("input",{value:c,onChange:function(e){s(e.target.value)},className:"login__form-input",type:"text",placeholder:"name"}),o.a.createElement("input",{value:d,onChange:function(e){m(e.target.value)},className:"login__form-input",type:"email",placeholder:"email"}),o.a.createElement("input",{value:h,onChange:function(e){x(e.target.value)},className:"login__form-input",type:"password",placeholder:"password"}),o.a.createElement("input",{value:_,onChange:function(e){j(e.target.value)},className:"login__form-input",type:"password",placeholder:"confirm password"}),o.a.createElement("button",{onClick:function(e){h===_?t(c,d,h):alert("Passwords are not the same. Try again.")},className:"login__form-button"},"Sign Up"),o.a.createElement(k.b,{className:"login__form-link",to:"/"},"Already have an account?"))))}var N=t(39);function S(){var e=g().login,n=Object(a.useState)(""),t=Object(u.a)(n,2),i=t[0],r=t[1],c=Object(a.useState)(""),s=Object(u.a)(c,2),l=s[0],p=s[1];return o.a.createElement("div",{className:"login"},o.a.createElement("div",null,o.a.createElement("h1",null,"MY PERSONAL BOOKSHELF"),o.a.createElement("div",{className:"login__form"},o.a.createElement("input",{value:i,className:"login__form-input",onChange:function(e){r(e.target.value)},type:"email",placeholder:"email"}),o.a.createElement("input",{value:l,className:"login__form-input",onChange:function(e){p(e.target.value)},type:"password",placeholder:"password"}),o.a.createElement("button",{onClick:function(){e(i,l)},className:"login__form-button"},"Sign In"),o.a.createElement(k.b,{className:"login__form-link",to:"/signup"},"Don't have an account?"))))}var I=function(e){var n=e.component,t=Object(N.a)(e,["component"]),a=g().isAuthenticated;return o.a.createElement(w.b,Object.assign({},t,{component:a?n:S}))},C="https://mawxfs6gx5.execute-api.us-east-1.amazonaws.com";function z(){var e=g(),n=e.authToken,t=e.isAuthenticated,i=e.username,r=Object(a.useState)({wishlist:[],books:[]}),c=Object(u.a)(r,2),p=c[0],d=c[1],m=Object(a.useState)("EDIT"),f=Object(u.a)(m,2),b=f[0],h=f[1],v=Object(a.useState)(!1),O=Object(u.a)(v,2),_=O[0],j=O[1],k=Object(a.useState)(!0),w=Object(u.a)(k,2),y=w[0],N=w[1],S=function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C,"/dev/lists"),{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){return e.json()}));case 2:(t=e.sent).success&&(d(t.lists),N(!1));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){S()}),[]),Object(a.useEffect)((function(){t&&!y&&function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C,"/dev/save"),{method:"POST",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify({lists:p})});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t,p,n,y]),o.a.createElement("div",{className:"page"},o.a.createElement(x,{username:i,setLists:d,handleEdit:function(){!1===_?(j(!0),h("DONE")):(j(!1),h("EDIT"))},value:b}),o.a.createElement(E,{setLists:d,lists:p,remove:_}))}function A(){var e=localStorage.getItem("token"),n=Object(a.useState)(!!e),t=Object(u.a)(n,2),i=t[0],r=t[1],c=Object(a.useState)(e),p=Object(u.a)(c,2),d=p[0],m=p[1],f=Object(a.useState)(""),g=Object(u.a)(f,2),h=g[0],x=g[1],v=Object(a.useState)(i),O=Object(u.a)(v,2),_=O[0],j=O[1];function E(){return(E=Object(l.a)(s.a.mark((function e(n,t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C,"/dev/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:t})}).then((function(e){return e.json()}));case 2:!0===(a=e.sent).success&&(localStorage.setItem("token",a.token),m(a.token),r(!0));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(l.a)(s.a.mark((function e(n,t,a){var o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C,"/dev/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n,email:t,password:a})}).then((function(e){return e.json()}));case 2:!0===(o=e.sent).success&&(localStorage.setItem("token",o.token),m(o.token),r(!0));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){r(!1),localStorage.removeItem("token")}return Object(a.useEffect)((function(){i&&function(){var e=Object(l.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C,"/dev/profile"),{headers:{Authorization:"Bearer ".concat(d)}}).then((function(e){return e.json()})).catch((function(){return S()}));case 2:(n=e.sent).success&&(x(n.name),r(!0),j(!1));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[i,d]),o.a.createElement(b.Provider,{value:{isAuthenticated:i,authToken:d,username:h,login:function(e,n){return E.apply(this,arguments)},logout:S,signUp:function(e,n,t){return N.apply(this,arguments)}}},_?o.a.createElement("div",null,"Loading..."):o.a.createElement(k.a,null,o.a.createElement(w.b,{path:"/signup",component:y}),o.a.createElement(I,{path:"/",exact:!0,component:z})))}var P=function(e){return o.a.createElement("div",{className:"page-layout"},e.children,o.a.createElement("style",null,'\n        html,\n        body,\n        div,\n        span,\n        h1,\n        h2,\n        h3,\n        h4,\n        h5,\n        h6,\n        p,\n        a,\n        em,\n        img,\n        strong,\n        b,\n        u,\n        i,\n        center,\n        ol,\n        ul,\n        li,\n        fieldset,\n        form,\n        label,\n        footer,\n        header,\n        menu,\n        nav,\n        section {\n          margin: 0;\n          padding: 0;\n          border: 0;\n          font-size: 100%;\n          font: inherit;\n          vertical-align: baseline;\n        }\n\n        ol,\n        ul {\n          list-style: none;\n        }\n\n        html, body {\n          position: relative;\n          height: 100%;\n          width: 100%;\n        }\n\n        body {\n          background-image: url("/img/wallpaper.jpeg");\n          background-size: cover;\n          line-height: 1;\n        }\n\n        body:before {\n          background-color: hsl(0deg 0% 0% / 22%);\n          content: "";\n          height: 105%;\n          width: 100%;\n          position: absolute;\n          top: 0;\n          left: 0;\n          z-index: -1;\n        }\n\n        .page {\n          padding: 0px 40px;\n        }\n\n        .header {\n          display: flex;\n          justify-content: space-between;\n          padding: 20px 0px;\n          z-index: 1;\n          position: relative;\n          align-items: center;\n        }\n\n        .search-bar {\n          display: flex;\n          justify-content: space-between;\n          width: 20%;\n          height: 30px;\n          background-color: #ffffff;\n          border: none;\n          border-radius: 5px;\n          padding: 5px 10px;\n          z-index: 1;\n          position relative;\n        }\n\n        .delete-button {\n          display: flex;\n          justify-content: flex-end;\n        }\n\n        .delete-button__inner-button {\n          border-radius: 15px;\n          padding: 2px 6px;\n          \n        }\n\n        button {\n          display: block;\n          background-color: #a48972;\n          border: 2px solid #523906;\n          box-shadow: 8px 0px 8px #523906;\n          border-radius: 5px;\n          color: #fff;\n          padding: 5px 8px;\n          font-size: 12px;\n        }\n\n        button:focus {\n          border: none;\n          outline: none;\n        }\n\n        .books, .wishlist {\n          display: flex;\n          margin: 10px 0px;\n          padding: 12px 15px;\n          box-shadow: 8px 0px 8px #523906;\n          width: 97%;\n          min-height: 220px;\n          max-height: 220px;\n          white-space: nowrap;\n          overflow: scroll;\n          justify-content: flex-start;\n          font-family: "Open Sans", cursive;\n          background-image: url("/img/wood.jpeg");\n          background-size: cover;\n          position: relative;\n        }\n\n        .wishlist {\n          background-image: none;\n          box-shadow: none;\n          justify-content: left;\n        }\n\n\n        .book-item, .wishlist-item {\n          padding: 12px 15px;\n          max-width: 150px;\n          text-align: center;\n        }\n\n        .book__img {\n          width: 120px;\n          height: 180px;\n        }\n\n        .book__content {\n          display: flex;\n          padding: 10px 30px;\n          justify-content: center;\n          align-items: center;\n          color: #000;\n          width: 70%;\n          background-color: #fff;\n          position: relative;\n          top: 120px;\n          left: 160px;\n          height: 400px;\n          border-radius: 2px;\n          z-index: 0;\n        }\n\n        .book__content__img {\n          width: 180px;\n          height: 280px;\n        }\n\n        .book__content__description {\n          max-width: 70%; \n        }\n\n        .book__content__description-item {\n          padding: 10px 20px;\n        }\n\n        .book__content__description-item-title {\n          font-size: 30px;\n        }\n\n        .book__content-background {\n          position:fixed;\n          padding:0;\n          margin:0;\n          top:0;\n          left:0;\n          width: 100%;\n          height: 100%;\n          background:rgba(255,255,255,0.5);\n          z-index: 1;\n        }\n\n        .login {\n          height: 95vh; \n          position: relative;\n          display: grid;\n          place-items: center;  \n        }\n\n        .login__form {\n          display: grid;      \n          background-color: #fff;\n          text-align: center;\n          border-radius: 5px;\n          box-shadow: 0px 0px 2px 3px #fff;\n          margin: 30px 0px;\n          padding: 30px;\n          \n        }\n\n        .login__form-input {\n          font-size: 20px;\n          margin-bottom: 15px;\n          padding: 5px;\n          text-decoration: none;\n        }\n\n        .login__form-link {\n          color: #523906;\n          font-size: 15px;\n          padding-top: 15px;\n        }\n\n\n        h1 {\n          font-family: "Amatic SC", cursive;\n          font-size: 50px;\n          color: #ffffff;\n          letter-spacing: 0.05em;\n        }\n\n        h2 {\n          font-family: "Amatic SC", cursive;\n          font-size: 40px;\n          color: #fff;\n          letter-spacing: 0.05em;\n          position: relative;\n          z-index: 1;\n          \n        }\n        .loading {\n          padding: 50px 0px;\n        }\n      '))};r.a.render(o.a.createElement(P,null,o.a.createElement(A,null)),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.f5079bac.chunk.js.map